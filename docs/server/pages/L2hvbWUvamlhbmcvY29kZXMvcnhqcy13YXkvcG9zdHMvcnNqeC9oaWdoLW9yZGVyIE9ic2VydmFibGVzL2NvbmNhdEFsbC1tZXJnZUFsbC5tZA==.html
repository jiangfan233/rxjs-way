<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/cef7f7dfbd1707c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cef7f7dfbd1707c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9a57abc21a6ff2fb.js" defer=""></script><script src="/_next/static/chunks/framework-4cb13ccabc5e927a.js" defer=""></script><script src="/_next/static/chunks/main-f52f4863361e2010.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b488468e8333c5c.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-6fc55a1d80ee6b4e.js" defer=""></script><script src="/_next/static/f9hAjcuOP35Y7HD3O1xXE/_buildManifest.js" defer=""></script><script src="/_next/static/f9hAjcuOP35Y7HD3O1xXE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class=" flex items-start justify-start p-1 overflow-y-hidden w-full xs:p-2 "><div class=" z-10 flex items-start justify-start"><div class="relative w-full"><ol class="w-0 -z-10 invisible relative list-disc xs:min-w-1/4 py-1 h-[96vh]"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==">rsjx</a><ol class="list-disc"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=">conbination-operators</a><ol class="list-disc"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=">index</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvbWVyZ2UubWQ=">merge</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvcmFjZS5tZA==">race</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvc3RhcnRXaXRoLm1k">startWith</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvd2l0aExhdGVzdEZyb20ubWQ=">withLatestFrom</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvemlwLWNvbmJpbmVMYXRlc3QubWQ=">zip-conbineLatest</a></li></ol></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k">high-order Observables</a><ol class="list-disc"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2NvbmNhdEFsbC1tZXJnZUFsbC5tZA==">concatAll-mergeAll</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k">index</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3N3aXRjaEFMTC1leGhhdXN0Lm1k">switchALL-exhaust</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3ppcEFsbC1jb25iaW5lQWxsLm1k">zipAll-conbineAll</a></li></ol></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==">index</a></li></ol></li></ol><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="absolute top-0 left-full cursor-pointer z-10 h-8 ml-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></div></div><div class=" w-full flex-col  items-center  justify-start "><div class="w-full flex gap-4 items-center justify-center relative h-8"><h2 class="font-bold text-3xl">The Rxjs Way</h2><a href="https://github.com/jiangfan233/rxjs-way" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="2rem" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a></div><div class="p-4 w-full flex flex-col items-center"><div class="w-full"><h4>mergeAll 和 concatAll 都是把 Observable 对象降低一维</h4>
<ul>
<li>concatAll 是按先后顺序把 子数据流 头(subscribe)尾(completed)相连，</li>
<li>因此</li>
<li>1、最后形成的数据流时间比任何一个子数据流都要长；</li>
<li>2、某时刻的数据只属于一个 子数据流；</li>
<li>3、子数据流的订阅时间可能晚于 该数据流 在下游的出现时间；</li>
<li>4、若中间的子数据流不 complete，后面的子数据流永远不会被订阅。</li>
<li>5、concatAll 可比喻为 单线程<br>
<br></li>
<li>mergeAll 是只要有子数据流在 下游 出现，就会被订阅。</li>
<li>因此</li>
<li>1、最后形成的数据流执行时间可能和 某一个子数据流 时间相同。</li>
<li>2、某时刻的数据可能源于多个数据流</li>
<li>3、子数据流在下游的出现时间和订阅时间基本一致（逻辑上时间相同）</li>
<li>4、所有的子数据流都会被订阅</li>
<li>5、mergeAll 可比喻为 并发</li>
</ul>
<pre><code class="hljs language-javascript">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fakeConcatAll</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-function">(<span class="hljs-params">obs$: Observable&lt;any&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">obsArr</span>: <span class="hljs-title class_">Observable</span>&lt;any&gt;[] = [];
    <span class="hljs-keyword">let</span> currentSubscription :<span class="hljs-title class_">Subscription</span> | <span class="hljs-literal">undefined</span>;
    <span class="hljs-keyword">let</span> hoCompleted = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Observable</span>.<span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">observer: Subscriber&lt;any&gt;</span>) =&gt;</span> {

        <span class="hljs-keyword">const</span> <span class="hljs-title function_">start</span> = (<span class="hljs-params"></span>) =&gt; {
            <span class="hljs-keyword">if</span>(obsArr.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">return</span> obsArr.<span class="hljs-title function_">shift</span>()!.<span class="hljs-title function_">subscribe</span>(
                <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> observer.<span class="hljs-title function_">next</span>(val),
                <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> observer.<span class="hljs-title function_">error</span>(err),
                <span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-keyword">if</span>(obsArr.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
                        currentSubscription = <span class="hljs-title function_">start</span>();
                    } <span class="hljs-keyword">else</span> {
                        currentSubscription = <span class="hljs-literal">undefined</span>;
                        <span class="hljs-keyword">if</span>(hoCompleted) {
                            observer.<span class="hljs-title function_">complete</span>();
                        }
                    }
                }
            )
        }

        <span class="hljs-keyword">const</span> hoSubscrption = obs$.<span class="hljs-title function_">subscribe</span>(
            <span class="hljs-function"><span class="hljs-params">subObs</span> =&gt;</span> {
                obsArr.<span class="hljs-title function_">push</span>(subObs);
                <span class="hljs-keyword">if</span>(!currentSubscription) {
                    currentSubscription = <span class="hljs-title function_">start</span>();
                }
            },
            <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> observer.<span class="hljs-title function_">error</span>(err),
            <span class="hljs-function">() =&gt;</span> hoCompleted = <span class="hljs-literal">true</span>
        )

        <span class="hljs-keyword">return</span> {
            <span class="hljs-title function_">unsubscribe</span>(<span class="hljs-params"></span>) {
                hoSubscrption.<span class="hljs-title function_">unsubscribe</span>();
                currentSubscription &amp;&amp; currentSubscription.<span class="hljs-title function_">unsubscribe</span>();
                obsArr.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
            }
        }
    })
}


<span class="hljs-keyword">const</span> <span class="hljs-title function_">fakeMergeAll</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-function">(<span class="hljs-params">obs$:Observable&lt;Observable&lt;any&gt;&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">subscriptionArr</span>: <span class="hljs-title class_">Subscription</span>[] = [];
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Observable</span>.<span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">observer: Subscriber&lt;any&gt;</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> hoSubscription = obs$.<span class="hljs-title function_">subscribe</span>(
            subObs$ =&gt; {
                <span class="hljs-keyword">const</span> sub = subObs$.<span class="hljs-title function_">subscribe</span>(
                    <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> observer.<span class="hljs-title function_">next</span>(val),
                    <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> observer.<span class="hljs-title function_">error</span>(err),
                    <span class="hljs-function">() =&gt;</span> {
                        <span class="hljs-keyword">if</span>(hoSubscription.<span class="hljs-property">closed</span> &amp;&amp;
                            subscriptionArr
                                <span class="hljs-comment">// 执行到这里的时候，该Observable已经可以 "认为" completed了，</span>
                                <span class="hljs-comment">// 但是还没有被标记为closed</span>
                                .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item !== sub)
                                .<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">closed</span>)) {
                            observer.<span class="hljs-title function_">complete</span>();
                        }
                    }
                )
                subscriptionArr.<span class="hljs-title function_">push</span>(sub);
            }
        )

        <span class="hljs-keyword">return</span> {
            <span class="hljs-title function_">unsubscribe</span>(<span class="hljs-params"></span>) {
                subscriptionArr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">sub</span> =&gt;</span> sub.<span class="hljs-title function_">unsubscribe</span>());
                hoSubscription.<span class="hljs-title function_">unsubscribe</span>();
            }
        }
    })
}

</code></pre>
</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\u003ch4\u003emergeAll 和 concatAll 都是把 Observable 对象降低一维\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003econcatAll 是按先后顺序把 子数据流 头(subscribe)尾(completed)相连，\u003c/li\u003e\n\u003cli\u003e因此\u003c/li\u003e\n\u003cli\u003e1、最后形成的数据流时间比任何一个子数据流都要长；\u003c/li\u003e\n\u003cli\u003e2、某时刻的数据只属于一个 子数据流；\u003c/li\u003e\n\u003cli\u003e3、子数据流的订阅时间可能晚于 该数据流 在下游的出现时间；\u003c/li\u003e\n\u003cli\u003e4、若中间的子数据流不 complete，后面的子数据流永远不会被订阅。\u003c/li\u003e\n\u003cli\u003e5、concatAll 可比喻为 单线程\u003cbr\u003e\n\u003cbr\u003e\u003c/li\u003e\n\u003cli\u003emergeAll 是只要有子数据流在 下游 出现，就会被订阅。\u003c/li\u003e\n\u003cli\u003e因此\u003c/li\u003e\n\u003cli\u003e1、最后形成的数据流执行时间可能和 某一个子数据流 时间相同。\u003c/li\u003e\n\u003cli\u003e2、某时刻的数据可能源于多个数据流\u003c/li\u003e\n\u003cli\u003e3、子数据流在下游的出现时间和订阅时间基本一致（逻辑上时间相同）\u003c/li\u003e\n\u003cli\u003e4、所有的子数据流都会被订阅\u003c/li\u003e\n\u003cli\u003e5、mergeAll 可比喻为 并发\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efakeConcatAll\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u0026gt; \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobs$: Observable\u0026lt;any\u0026gt;\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eobsArr\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e\u0026lt;any\u0026gt;[] = [];\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e currentSubscription :\u003cspan class=\"hljs-title class_\"\u003eSubscription\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e hoCompleted = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobserver: Subscriber\u0026lt;any\u0026gt;\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003estart\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u0026gt; {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(obsArr.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u0026lt;= \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e obsArr.\u003cspan class=\"hljs-title function_\"\u003eshift\u003c/span\u003e()!.\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\n                \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e =\u0026gt;\u003c/span\u003e observer.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(val),\n                \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e =\u0026gt;\u003c/span\u003e observer.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err),\n                \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n                    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(obsArr.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) {\n                        currentSubscription = \u003cspan class=\"hljs-title function_\"\u003estart\u003c/span\u003e();\n                    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                        currentSubscription = \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e;\n                        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(hoCompleted) {\n                            observer.\u003cspan class=\"hljs-title function_\"\u003ecomplete\u003c/span\u003e();\n                        }\n                    }\n                }\n            )\n        }\n\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e hoSubscrption = obs$.\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\n            \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003esubObs\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n                obsArr.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e(subObs);\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(!currentSubscription) {\n                    currentSubscription = \u003cspan class=\"hljs-title function_\"\u003estart\u003c/span\u003e();\n                }\n            },\n            \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e =\u0026gt;\u003c/span\u003e observer.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err),\n            \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e hoCompleted = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n        )\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n            \u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n                hoSubscrption.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e();\n                currentSubscription \u0026amp;\u0026amp; currentSubscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e();\n                obsArr.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n            }\n        }\n    })\n}\n\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efakeMergeAll\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u0026gt; \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobs$:Observable\u0026lt;Observable\u0026lt;any\u0026gt;\u0026gt;\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esubscriptionArr\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eSubscription\u003c/span\u003e[] = [];\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobserver: Subscriber\u0026lt;any\u0026gt;\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e hoSubscription = obs$.\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\n            subObs$ =\u0026gt; {\n                \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sub = subObs$.\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\n                    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e =\u0026gt;\u003c/span\u003e observer.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(val),\n                    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e =\u0026gt;\u003c/span\u003e observer.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err),\n                    \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n                        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(hoSubscription.\u003cspan class=\"hljs-property\"\u003eclosed\u003c/span\u003e \u0026amp;\u0026amp;\n                            subscriptionArr\n                                \u003cspan class=\"hljs-comment\"\u003e// 执行到这里的时候，该Observable已经可以 \"认为\" completed了，\u003c/span\u003e\n                                \u003cspan class=\"hljs-comment\"\u003e// 但是还没有被标记为closed\u003c/span\u003e\n                                .\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item !== sub)\n                                .\u003cspan class=\"hljs-title function_\"\u003eevery\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property\"\u003eclosed\u003c/span\u003e)) {\n                            observer.\u003cspan class=\"hljs-title function_\"\u003ecomplete\u003c/span\u003e();\n                        }\n                    }\n                )\n                subscriptionArr.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e(sub);\n            }\n        )\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n            \u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n                subscriptionArr.\u003cspan class=\"hljs-title function_\"\u003eforEach\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003esub\u003c/span\u003e =\u0026gt;\u003c/span\u003e sub.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e());\n                hoSubscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e();\n            }\n        }\n    })\n}\n\n\u003c/code\u003e\u003c/pre\u003e\n","menuArray":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==","label":"rsjx","subMenus":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=","label":"conbination-operators","subMenus":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=","label":"index","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvbWVyZ2UubWQ=","label":"merge","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvcmFjZS5tZA==","label":"race","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvc3RhcnRXaXRoLm1k","label":"startWith","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvd2l0aExhdGVzdEZyb20ubWQ=","label":"withLatestFrom","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvemlwLWNvbmJpbmVMYXRlc3QubWQ=","label":"zip-conbineLatest","subMenus":null}]},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k","label":"high-order Observables","subMenus":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2NvbmNhdEFsbC1tZXJnZUFsbC5tZA==","label":"concatAll-mergeAll","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k","label":"index","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3N3aXRjaEFMTC1leGhhdXN0Lm1k","label":"switchALL-exhaust","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3ppcEFsbC1jb25iaW5lQWxsLm1k","label":"zipAll-conbineAll","subMenus":null}]},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==","label":"index","subMenus":null}]}]},"__N_SSG":true},"page":"/[id]","query":{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2NvbmNhdEFsbC1tZXJnZUFsbC5tZA=="},"buildId":"f9hAjcuOP35Y7HD3O1xXE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>