<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/cef7f7dfbd1707c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cef7f7dfbd1707c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9a57abc21a6ff2fb.js" defer=""></script><script src="/_next/static/chunks/framework-4cb13ccabc5e927a.js" defer=""></script><script src="/_next/static/chunks/main-f52f4863361e2010.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b488468e8333c5c.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-6fc55a1d80ee6b4e.js" defer=""></script><script src="/_next/static/f9hAjcuOP35Y7HD3O1xXE/_buildManifest.js" defer=""></script><script src="/_next/static/f9hAjcuOP35Y7HD3O1xXE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class=" flex items-start justify-start p-1 overflow-y-hidden w-full xs:p-2 "><div class=" z-10 flex items-start justify-start"><div class="relative w-full"><ol class="w-0 -z-10 invisible relative list-disc xs:min-w-1/4 py-1 h-[96vh]"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==">rsjx</a><ol class="list-disc"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=">conbination-operators</a><ol class="list-disc"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=">index</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvbWVyZ2UubWQ=">merge</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvcmFjZS5tZA==">race</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvc3RhcnRXaXRoLm1k">startWith</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvd2l0aExhdGVzdEZyb20ubWQ=">withLatestFrom</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvemlwLWNvbmJpbmVMYXRlc3QubWQ=">zip-conbineLatest</a></li></ol></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k">high-order Observables</a><ol class="list-disc"><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2NvbmNhdEFsbC1tZXJnZUFsbC5tZA==">concatAll-mergeAll</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k">index</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3N3aXRjaEFMTC1leGhhdXN0Lm1k">switchALL-exhaust</a></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3ppcEFsbC1jb25iaW5lQWxsLm1k">zipAll-conbineAll</a></li></ol></li><li class="mx-4"><a href="/L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==">index</a></li></ol></li></ol><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="absolute top-0 left-full cursor-pointer z-10 h-8 ml-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></div></div><div class=" w-full flex-col  items-center  justify-start "><div class="w-full flex gap-4 items-center justify-center relative h-8"><h2 class="font-bold text-3xl">The Rxjs Way</h2><a href="https://github.com/jiangfan233/rxjs-way" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="2rem" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a></div><div class="p-4 w-full flex flex-col items-center"><div class="w-full"><h5>zip和combineLatest的区别在于</h5>
<p>zip每吐出一个数据集合都需要等待所有数据源吐出数据（数据源的数据是 and 的关系）;<br>
combineLatest 仅仅在第一次吐出数据集合的时候等待所有数据源，后面要任意数据源产生数据都会吐出数据集合（数据源的数据从 and 变为 or）</p>
<h6>combineLatest 小缺陷：</h6>
<p>对于同时到来的两个或多个数据，本应该产生一个输出，实际结果却产生了两个或多个，<br>
因为多个数据源同时产生数据，同时产生多个宏任务，因此也就无法使用微任务解决这个缺陷（个人猜测）</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// zip:</span>
<span class="hljs-comment">// 可操作多组数据流，</span>
<span class="hljs-comment">// zip产出的数据取决于所有数据流中最短的那个 =&gt; 并不是所有数据都能获取到</span>
<span class="hljs-comment">// zip产出数据的速度取决于所有数据流中最慢的那个</span>
<span class="hljs-comment">// zip(of(1,2,3), interval(1000).pipe(take(2))).subscribe(</span>
<span class="hljs-comment">//     console.log,</span>
<span class="hljs-comment">//     console.error,</span>
<span class="hljs-comment">//     // 产出 [1,0] [2,1] 之后 done</span>
<span class="hljs-comment">//     () =&gt; console.log("done")</span>
<span class="hljs-comment">// )</span>

<span class="hljs-comment">//////////////////////////////////////////////</span>

<span class="hljs-comment">// zip和combineLatest的区别在于</span>
<span class="hljs-comment">// zip每吐出一个数据集合都需要等待所有数据源吐出数据（数据源的数据是 and 的关系），</span>
<span class="hljs-comment">// combineLatest 仅仅在第一次吐出数据集合的时候等待所有数据源，后面要任意数据源产生数据都会吐出数据集合（数据源的数据从 and 变为 or）</span>

<span class="hljs-comment">// combineLatest 第一次需要填充数据集合，因此需要等待所有数据，</span>
<span class="hljs-comment">// 后面的每一次只要任意数据源产生数据都会吐出数据集合</span>
<span class="hljs-comment">// combineLatest 可接受一个函数project，用于处理combineLatest产生的数据集合并将结果传递给下游</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">fakeCombineLatest</span> = (<span class="hljs-params">...args: any[]</span>) =&gt; {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">project</span>: <span class="hljs-title class_">Function</span> | <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">rest</span>: <span class="hljs-title class_">Observable</span>&lt;any&gt;[];
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> args[args.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === <span class="hljs-string">"function"</span>) {
    project = args[args.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    rest = args.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);
  } <span class="hljs-keyword">else</span> {
    rest = args;
  }
  <span class="hljs-keyword">const</span> values = <span class="hljs-title class_">Array</span>(rest.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> completedArr = <span class="hljs-title class_">Array</span>(rest.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">nextFunc</span> = (<span class="hljs-params">val: any, index: number, observer: Subscriber&lt;any&gt;</span>) =&gt; {
    values[index] = val;

    <span class="hljs-comment">// 这里仅仅验证 values 中数据的长度</span>
    <span class="hljs-keyword">if</span> (values.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> val !== <span class="hljs-literal">undefined</span> &amp;&amp; val !== <span class="hljs-literal">null</span>)) {
      observer.<span class="hljs-title function_">next</span>(
        project ? project.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, values.<span class="hljs-title function_">slice</span>()) : values.<span class="hljs-title function_">slice</span>()
      );
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">completeFunc</span> = (<span class="hljs-params">index: number, observer: Subscriber&lt;any[]&gt;</span>) =&gt; {
    completedArr[index] = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (completedArr.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">isCompleted</span>) =&gt;</span> isCompleted)) {
      observer.<span class="hljs-title function_">complete</span>();
    }
  };

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Observable</span>.<span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">observer: Subscriber&lt;any[]&gt;</span>) =&gt;</span> {
    rest.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">obs$, index</span>) =&gt;</span> {
      obs$.<span class="hljs-title function_">subscribe</span>(
        <span class="hljs-comment">// 当有多个数据源同时(逻辑上的同时，物理上相差几纳秒)调用 nextFunc时，每一个都会创建一个宏任务</span>
        <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> <span class="hljs-title function_">nextFunc</span>(val, index, observer),
        <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> observer.<span class="hljs-title function_">error</span>(error),
        <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">completeFunc</span>(index, observer)
      );
    });
  });
};

<span class="hljs-comment">// combineLatest(</span>
<span class="hljs-comment">// fakeCombineLatest(</span>
<span class="hljs-comment">//     timer(500, 1000).pipe(take(3), map(val =&gt; String.fromCharCode(val + 65))),</span>
<span class="hljs-comment">//     timer(1000, 1000).pipe(take(4)),</span>
<span class="hljs-comment">//     (a: string, b: number) =&gt; `item: ${a} -- ${b}`</span>
<span class="hljs-comment">// ).subscribe(</span>
<span class="hljs-comment">//     console.log,</span>
<span class="hljs-comment">//     console.error,</span>
<span class="hljs-comment">//     () =&gt; console.log("done")</span>
<span class="hljs-comment">// )</span>

<span class="hljs-comment">// combineLatest 小缺陷(glitch)：</span>
<span class="hljs-comment">// 对于同时到来的两个或多个数据，本应该产生一个输出，实际结果却产生了两个或多个，</span>
<span class="hljs-comment">// 因为多个数据源同时产生数据，同时产生多个宏任务，因此也就无法使用微任务解决这个缺陷（个人猜测）</span>
<span class="hljs-title function_">fakeCombineLatest</span>(
  <span class="hljs-comment">// combineLatest(</span>
  <span class="hljs-title function_">timer</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>).<span class="hljs-title function_">pipe</span>(
    <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${val}</span>a`</span>),
    <span class="hljs-title function_">take</span>(<span class="hljs-number">1</span>)
  ),
  <span class="hljs-title function_">timer</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>).<span class="hljs-title function_">pipe</span>(
    <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${val}</span>b`</span>),
    <span class="hljs-title function_">take</span>(<span class="hljs-number">1</span>)
  ),
  <span class="hljs-function">(<span class="hljs-params">a: string, b: string</span>) =&gt;</span> <span class="hljs-string">`item: <span class="hljs-subst">${a}</span> -- <span class="hljs-subst">${b}</span>`</span>
).<span class="hljs-title function_">subscribe</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>, <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"done"</span>));
</code></pre>
</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\u003ch5\u003ezip和combineLatest的区别在于\u003c/h5\u003e\n\u003cp\u003ezip每吐出一个数据集合都需要等待所有数据源吐出数据（数据源的数据是 and 的关系）;\u003cbr\u003e\ncombineLatest 仅仅在第一次吐出数据集合的时候等待所有数据源，后面要任意数据源产生数据都会吐出数据集合（数据源的数据从 and 变为 or）\u003c/p\u003e\n\u003ch6\u003ecombineLatest 小缺陷：\u003c/h6\u003e\n\u003cp\u003e对于同时到来的两个或多个数据，本应该产生一个输出，实际结果却产生了两个或多个，\u003cbr\u003e\n因为多个数据源同时产生数据，同时产生多个宏任务，因此也就无法使用微任务解决这个缺陷（个人猜测）\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// zip:\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 可操作多组数据流，\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// zip产出的数据取决于所有数据流中最短的那个 =\u0026gt; 并不是所有数据都能获取到\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// zip产出数据的速度取决于所有数据流中最慢的那个\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// zip(of(1,2,3), interval(1000).pipe(take(2))).subscribe(\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     console.log,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     console.error,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     // 产出 [1,0] [2,1] 之后 done\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     () =\u0026gt; console.log(\"done\")\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// )\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e//////////////////////////////////////////////\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// zip和combineLatest的区别在于\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// zip每吐出一个数据集合都需要等待所有数据源吐出数据（数据源的数据是 and 的关系），\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// combineLatest 仅仅在第一次吐出数据集合的时候等待所有数据源，后面要任意数据源产生数据都会吐出数据集合（数据源的数据从 and 变为 or）\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// combineLatest 第一次需要填充数据集合，因此需要等待所有数据，\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 后面的每一次只要任意数据源产生数据都会吐出数据集合\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// combineLatest 可接受一个函数project，用于处理combineLatest产生的数据集合并将结果传递给下游\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efakeCombineLatest\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e...args: any[]\u003c/span\u003e) =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eproject\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFunction\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erest\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e\u0026lt;any\u0026gt;[];\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e args[args.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] === \u003cspan class=\"hljs-string\"\u003e\"function\"\u003c/span\u003e) {\n    project = args[args.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e];\n    rest = args.\u003cspan class=\"hljs-title function_\"\u003eslice\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    rest = args;\n  }\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e values = \u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e(rest.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003efill\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e completedArr = \u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e(rest.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003efill\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003enextFunc\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eval: any, index: number, observer: Subscriber\u0026lt;any\u0026gt;\u003c/span\u003e) =\u0026gt; {\n    values[index] = val;\n\n    \u003cspan class=\"hljs-comment\"\u003e// 这里仅仅验证 values 中数据的长度\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (values.\u003cspan class=\"hljs-title function_\"\u003eevery\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) =\u0026gt;\u003c/span\u003e val !== \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e \u0026amp;\u0026amp; val !== \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e)) {\n      observer.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\n        project ? project.\u003cspan class=\"hljs-title function_\"\u003eapply\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, values.\u003cspan class=\"hljs-title function_\"\u003eslice\u003c/span\u003e()) : values.\u003cspan class=\"hljs-title function_\"\u003eslice\u003c/span\u003e()\n      );\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecompleteFunc\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eindex: number, observer: Subscriber\u0026lt;any[]\u0026gt;\u003c/span\u003e) =\u0026gt; {\n    completedArr[index] = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (completedArr.\u003cspan class=\"hljs-title function_\"\u003eevery\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eisCompleted\u003c/span\u003e) =\u0026gt;\u003c/span\u003e isCompleted)) {\n      observer.\u003cspan class=\"hljs-title function_\"\u003ecomplete\u003c/span\u003e();\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobserver: Subscriber\u0026lt;any[]\u0026gt;\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    rest.\u003cspan class=\"hljs-title function_\"\u003eforEach\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eobs$, index\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      obs$.\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\n        \u003cspan class=\"hljs-comment\"\u003e// 当有多个数据源同时(逻辑上的同时，物理上相差几纳秒)调用 nextFunc时，每一个都会创建一个宏任务\u003c/span\u003e\n        \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003enextFunc\u003c/span\u003e(val, index, observer),\n        \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerror\u003c/span\u003e) =\u0026gt;\u003c/span\u003e observer.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error),\n        \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecompleteFunc\u003c/span\u003e(index, observer)\n      );\n    });\n  });\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// combineLatest(\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// fakeCombineLatest(\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     timer(500, 1000).pipe(take(3), map(val =\u0026gt; String.fromCharCode(val + 65))),\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     timer(1000, 1000).pipe(take(4)),\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     (a: string, b: number) =\u0026gt; `item: ${a} -- ${b}`\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// ).subscribe(\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     console.log,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     console.error,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//     () =\u0026gt; console.log(\"done\")\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// )\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// combineLatest 小缺陷(glitch)：\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 对于同时到来的两个或多个数据，本应该产生一个输出，实际结果却产生了两个或多个，\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 因为多个数据源同时产生数据，同时产生多个宏任务，因此也就无法使用微任务解决这个缺陷（个人猜测）\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003efakeCombineLatest\u003c/span\u003e(\n  \u003cspan class=\"hljs-comment\"\u003e// combineLatest(\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003etimer\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003epipe\u003c/span\u003e(\n    \u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${val}\u003c/span\u003ea`\u003c/span\u003e),\n    \u003cspan class=\"hljs-title function_\"\u003etake\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n  ),\n  \u003cspan class=\"hljs-title function_\"\u003etimer\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003epipe\u003c/span\u003e(\n    \u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${val}\u003c/span\u003eb`\u003c/span\u003e),\n    \u003cspan class=\"hljs-title function_\"\u003etake\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n  ),\n  \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea: string, b: string\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`item: \u003cspan class=\"hljs-subst\"\u003e${a}\u003c/span\u003e -- \u003cspan class=\"hljs-subst\"\u003e${b}\u003c/span\u003e`\u003c/span\u003e\n).\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elog\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"done\"\u003c/span\u003e));\n\u003c/code\u003e\u003c/pre\u003e\n","menuArray":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==","label":"rsjx","subMenus":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=","label":"conbination-operators","subMenus":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvaW5kZXgubWQ=","label":"index","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvbWVyZ2UubWQ=","label":"merge","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvcmFjZS5tZA==","label":"race","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvc3RhcnRXaXRoLm1k","label":"startWith","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvd2l0aExhdGVzdEZyb20ubWQ=","label":"withLatestFrom","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvemlwLWNvbmJpbmVMYXRlc3QubWQ=","label":"zip-conbineLatest","subMenus":null}]},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k","label":"high-order Observables","subMenus":[{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2NvbmNhdEFsbC1tZXJnZUFsbC5tZA==","label":"concatAll-mergeAll","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL2luZGV4Lm1k","label":"index","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3N3aXRjaEFMTC1leGhhdXN0Lm1k","label":"switchALL-exhaust","subMenus":null},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9oaWdoLW9yZGVyIE9ic2VydmFibGVzL3ppcEFsbC1jb25iaW5lQWxsLm1k","label":"zipAll-conbineAll","subMenus":null}]},{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9pbmRleC5tZA==","label":"index","subMenus":null}]}]},"__N_SSG":true},"page":"/[id]","query":{"id":"L2hvbWUvamlhbmcvY29kZXMvcnhqcy13YXkvcG9zdHMvcnNqeC9jb25iaW5hdGlvbi1vcGVyYXRvcnMvemlwLWNvbmJpbmVMYXRlc3QubWQ="},"buildId":"f9hAjcuOP35Y7HD3O1xXE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>